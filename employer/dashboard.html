<!-- AI disclosure 
 Some Part of this code were generated by Chat GPT -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Employer Dashboard</title>
  <link rel="stylesheet" href="../assets/css/base.css">
  <style>
    /* ===== Topbar ===== */
    .topbar{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:16px 24px;
      border-bottom:1px solid var(--line)
    }
    .brand{font-weight:700;text-decoration:none;color:var(--ink)}
    .brand:hover{text-decoration:underline}
    .right-actions{display:flex;align-items:center;gap:12px}
    .logout{color:var(--ink);text-decoration:none;border:1px solid var(--line);padding:6px 10px;border-radius:10px}
    .logout:hover{background:#fff}

    /* ===== Notification bell ===== */
    .notif-btn{
      position:relative;
      width:44px;height:44px;border-radius:999px;background:#1f2636;border:0;
      display:inline-flex;align-items:center;justify-content:center;cursor:pointer;
    }
    .notif-btn svg{width:22px;height:22px;stroke:#ffffff}
    .notif-btn:focus{outline:2px solid rgba(47,111,237,.35); outline-offset:2px}
    .notif-dot{
      position:absolute;right:3px;top:3px;width:12px;height:12px;border-radius:999px;
      background:#ef4444;border:2px solid #1f2636;display:none;
    }
    .notif-btn.has-unread .notif-dot{display:block}

    /* ===== Layout ===== */
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    .role-grid{grid-template-columns:1fr 1fr}
    @media (max-width:900px){ .role-grid{grid-template-columns:1fr} }
    .role-grid .card{display:flex;align-items:center;justify-content:center;text-align:center;min-height:140px;padding:20px}
    .card-content{display:flex;flex-direction:column;align-items:center;gap:6px}
    .role-grid .card h3{margin:0}
    .role-grid .card p{margin:0}

    /* ===== Modal ===== */
    .modal-backdrop{position:fixed;inset:0;background:rgba(28,36,48,.35);display:none;align-items:center;justify-content:center;z-index:200}
    .modal-backdrop.show{display:flex}
    .modal{width:min(560px,92vw);background:#fff;border:1px solid var(--line);border-radius:14px;padding:18px;box-shadow:0 20px 60px rgba(16,24,40,.12)}
    .modal header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .modal h2{margin:0;font-size:1.25rem}
    .modal .close-x{background:transparent;border:0;color:var(--muted);font-size:1.4rem;cursor:pointer;line-height:1}
    .modal .tools{display:flex;gap:10px;align-items:center}
    .pill{padding:.32rem .65rem;border-radius:999px;border:1px solid #d7deea;background:#fff;color:var(--ink);cursor:pointer}
    .pill:hover{background:#f6f8fc;border-color:#c8d2e6}

    .notif-list{display:grid;gap:10px;max-height:60vh;overflow:auto;padding-right:6px}
    .notif-item{border:1px solid var(--line);border-radius:12px;background:#fff;padding:12px;display:grid;gap:4px}
    .notif-item.approved{border-left:6px solid #16a34a;background:rgba(22,163,74,.04)}
    .notif-item.declined{border-left:6px solid #ef4444;background:rgba(239,68,68,.04)}
    .notif-title{font-weight:600}
    .notif-meta{color:var(--muted);font-size:.92rem}
    .notif-feedback{margin-top:4px}
    .empty{padding:10px;color:var(--muted)}
    .status-tag{display:inline-block;padding:.15rem .45rem;border-radius:999px;font-size:.8rem;border:1px solid #cfd8e6;background:#fff;margin-left:6px}
    .approved .status-tag{border-color:#bfe6cf;background:#effaf3;color:#256d3d}
    .declined .status-tag{border-color:#f2c7c7;background:#fff6f6;color:#b3261e}
  </style>
</head>
<body>
  <div class="topbar">
    <a class="brand" href="../index.html">Student2Success</a>
    <div class="right-actions">
      <!-- Notification bell -->
      <button id="notifBtn" class="notif-btn" aria-label="Open notifications" title="Notifications">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M12 22c1.104 0 2-.9 2-2h-4c0 1.1.896 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4a1.5 1.5 0 10-3 0v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span id="notifDot" class="notif-dot" aria-hidden="true"></span>
      </button>
      <a href="../index.html" class="logout">Logout</a>
    </div>
  </div>

  <header class="wrap">
    <h1 class="t-center">Employer Dashboard</h1>
  </header>

  <main class="container grid role-grid">
    <a class="card" href="jobs.html">
      <div class="card-content">
        <h3>View Jobs</h3>
        <p class="meta">See your postings, statuses, and applicants.</p>
      </div>
    </a>

    <a class="card" href="post-job.html">
      <div class="card-content">
        <h3>Post New Job</h3>
        <p class="meta">Create a new listing to recruit candidates.</p>
      </div>
    </a>
  </main>

  <!-- Notifications Modal -->
  <div id="notifModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="notifTitle">
    <div class="modal">
      <header>
        <h2 id="notifTitle">Notifications</h2>
        <div class="tools">
          <button id="markAll" class="pill" type="button">Mark all as read</button>
          <button id="closeModal" class="close-x" type="button" aria-label="Close">Ã—</button>
        </div>
      </header>
      <div id="notifList" class="notif-list" aria-live="polite"></div>
    </div>
  </div>

  <footer class="footer">Student2Success</footer>

  <script>
    /* =========================================================
       HARD-CODED notifications (no localStorage)
       ========================================================= */
    const NOTIFS = [
      {
        id: 'ex1',
        job: 'Software Developer Intern',
        status: 'approved',        // 'approved' | 'declined'
        feedback: '',
        timestamp: Date.now() - 2 * 60 * 60 * 1000, // 2h ago
        read: false
      },
      {
        id: 'ex2',
        job: 'Web Engineer Co-op',
        status: 'declined',
        feedback: 'Job description not provided properly with some missing information',
        timestamp: Date.now() - 26 * 60 * 60 * 1000, // 26h ago
        read: false
      }
    ];

    // ---- Utilities ----
    const byNewest = (a,b) => (b.timestamp||0) - (a.timestamp||0);
    const timeAgo = (t)=>{
      const s = Math.max(1, Math.floor((Date.now()-t)/1000));
      if (s < 60) return `${s}s ago`;
      const m = Math.floor(s/60); if (m < 60) return `${m}m ago`;
      const h = Math.floor(m/60); if (h < 24) return `${h}h ago`;
      const d = Math.floor(h/24); return `${d}d ago`;
    };

    // ---- Elements ----
    const notifBtn   = document.getElementById('notifBtn');
    const notifDot   = document.getElementById('notifDot');
    const notifModal = document.getElementById('notifModal');
    const closeModal = document.getElementById('closeModal');
    const markAllBtn = document.getElementById('markAll');
    const listEl     = document.getElementById('notifList');

    // ---- Rendering ----
    function renderList(){
      const items = [...NOTIFS].sort(byNewest);
      listEl.innerHTML = '';

      if (!items.length){
        listEl.innerHTML = '<div class="empty">No notifications yet.</div>';
      } else {
        items.forEach(n=>{
          const wrap = document.createElement('div');
          wrap.className = `notif-item ${n.status} ${n.read ? 'read' : ''}`;

          const title = document.createElement('div');
          title.className = 'notif-title';
          const statusWord = n.status === 'approved' ? 'Approved' : 'Declined';
          title.innerHTML = `${n.job} <span class="status-tag">${statusWord}</span>`;

          const meta = document.createElement('div');
          meta.className = 'notif-meta';
          meta.textContent = timeAgo(n.timestamp);

          wrap.appendChild(title);
          wrap.appendChild(meta);

          if (n.status === 'declined' && n.feedback){
            const fb = document.createElement('div');
            fb.className = 'notif-feedback';
            fb.innerHTML = `<strong>Feedback:</strong> ${n.feedback}`;
            wrap.appendChild(fb);
          }
          listEl.appendChild(wrap);
        });
      }

      // Bell dot (any unread?)
      const anyUnread = NOTIFS.some(i => !i.read);
      notifBtn.classList.toggle('has-unread', anyUnread);
    }

    function openModal(){
      renderList();
      notifModal.classList.add('show');

      // Mark as read upon opening (visual only, no storage)
      let changed = false;
      NOTIFS.forEach(n => { if (!n.read) { n.read = true; changed = true; } });
      if (changed) renderList();
    }

    function closeModalFn(){
      notifModal.classList.remove('show');
      renderList();
    }

    // ---- Events ----
    markAllBtn.addEventListener('click', ()=>{
      NOTIFS.forEach(n => n.read = true);
      renderList();
    });

    notifBtn.addEventListener('click', openModal);
    closeModal.addEventListener('click', closeModalFn);
    notifModal.addEventListener('click', (e)=>{ if(e.target === notifModal) closeModalFn(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModalFn(); });

    // Initial render
    renderList();
  </script>
</body>
</html>