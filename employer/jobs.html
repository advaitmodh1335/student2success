<!-- AI disclosure 
 Some Part of this code were generated by Chat GPT -->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Employer · Jobs</title>
  <link rel="stylesheet" href="../assets/css/base.css">
  <style>
    :root{ --action-w: 210px }

    .wrap{max-width:1100px;margin:0 auto;padding:24px}

    /* Top bar (brand + logout) */
    .topbar{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:16px 24px;
      border-bottom:1px solid var(--line)
    }
    .brand{font-weight:700;text-decoration:none;color:var(--ink)}
    .brand:hover{text-decoration:underline}
    .logout{color:var(--ink);text-decoration:none;border:1px solid var(--line);padding:6px 10px;border-radius:10px}
    .logout:hover{background:#fff}

    /* FULL-WIDTH back row (left aligned to page) */
    .back-strip{
      width:100%;
      padding:16px 24px 0;
      display:flex;
      justify-content:flex-start;
    }
    .backbtn{
      display:inline-flex;align-items:center;gap:8px;
      background:#fff;color:var(--ink);
      border:1px solid var(--line);
      border-radius:10px;
      padding:.45rem .8rem;
      text-decoration:none;cursor:pointer;
    }
    .backbtn:hover{background:#f6f8fc;border-color:#c8d2e6}
    .backbtn svg{width:18px;height:18px;stroke:currentColor}

    /* Center page title */
    .page-header{max-width:1100px;margin:0 auto;padding:12px 24px 24px}
    .page-header h1{margin:0;text-align:center}

    .btn{border:0}
    .btn.xs{padding:.4rem .6rem;font-size:.9rem;border-radius:8px}
    .btn.safe{background:var(--accent);color:#fff}
    .btn-edit{background:#f59e0b;color:#fff}
    .btn-close{background:#ef4444;color:#fff}
    .btn-edit:hover,.btn-close:hover,.btn.safe:hover{filter:brightness(.95)}
    .btn-edit:focus,.btn-close:focus,.btn.safe:focus{outline:2px solid rgba(47,111,237,.25);outline-offset:2px}

    .jobs-table{table-layout:fixed}
    .jobs-table th:nth-child(1), .jobs-table td:nth-child(1){width:46%}
    .jobs-table th:nth-child(2), .jobs-table td:nth-child(2){width:18%}
    .jobs-table th:nth-child(3), .jobs-table td:nth-child(3){width:12%}
    .jobs-table th:nth-child(4), .jobs-table td:nth-child(4){width:24%}

    .actions-cell{vertical-align:middle}
    .jobs-actions{display:flex;flex-direction:column;align-items:flex-end;gap:10px}
    .inline-actions{display:grid;grid-template-columns:1fr 1fr;gap:8px;width:min(100%,var(--action-w))}
    .inline-actions .btn{width:100%}
    .jobs-actions .btn.safe{width:min(100%,var(--action-w))}
    .jobs-actions .btn{display:flex;align-items:center;justify-content:center;text-align:center}

    .jobs-table tbody tr:hover{background:#eef3ff}

    /* ===== Modal styles ===== */
    .backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(17,24,39,.45);z-index:300}
    .backdrop.show{display:flex}
    .modal{width:min(560px,94vw);background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:0 24px 60px rgba(2,8,23,.28)}
    .modal header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line)}
    .modal .body{padding:16px}
    .modal .footer{padding:14px 16px;border-top:1px solid var(--line);display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap}
    .modal .close-x{background:transparent;border:0;font-size:1.4rem;color:var(--muted);cursor:pointer;line-height:1}
    .btn.danger{background:#dc2626;color:#fff}
    .btn.secondary{background:#fff;border:1px solid #d7deea;color:#0f1626}
    .btn.secondary:hover{background:#f6f8fc;border-color:#c8d2e6}

    /* Empty state */
    .empty{padding:32px;text-align:center;color:var(--muted)}
  </style>
</head>
<body>
  <!-- Top bar -->
  <div class="topbar">
    <a class="brand" href="../index.html">Student2Success</a>
    <a href="../index.html" class="logout">Logout</a>
  </div>

  <!-- Back button aligned to left of the page -->
  <div class="back-strip">
    <button class="backbtn" type="button"
      onclick="(window.location.href='dashboard.html')">
      <svg viewBox="0 0 24 24" fill="none"><path d="M15 6l-6 6 6 6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <span>Back</span>
    </button>
  </div>

  <!-- Centered title -->
  <header class="page-header">
    <h1>Job Posts</h1>
  </header>

  <main>
    <div class="wrap">
      <div class="card">
        <table class="table jobs-table" id="jobsTable">
          <thead>
            <tr>
              <th>Job</th>
              <th>Status</th>
              <th class="num">Applicants</th>
              <th class="actions">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Software Developer Intern</td>
              <td><span class="status pending">Pending</span></td>
              <td class="num"><a href="applicants.html">0</a></td>
              <td class="actions-cell">
                <div class="jobs-actions">
                  <div class="inline-actions">
                    <a class="btn xs btn-edit" href="edit-job.html?id=swe-intern">Edit</a>
                    <a class="btn xs btn-close" href="#" data-delete>Delete</a>
                  </div>
                  <a class="btn xs safe" href="applicants.html">View Applicants</a>
                </div>
              </td>
            </tr>
            <tr>
              <td>Web Engineer Co-op</td>
              <td><span class="status approved">Approved</span></td>
              <td class="num"><a href="applicants.html">7</a></td>
              <td class="actions-cell">
                <div class="jobs-actions">
                  <div class="inline-actions">
                    <a class="btn xs btn-edit" href="edit-job.html?id=web-engineer-coop">Edit</a>
                    <a class="btn xs btn-close" href="#" data-delete>Delete</a>
                  </div>
                  <a class="btn xs safe" href="applicants.html">View Applicants</a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Empty state (hidden until needed) -->
        <div id="emptyState" class="empty" style="display:none">
          No job posts yet.
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">Student2Success</footer>

  <!-- Delete confirmation modal -->
  <div id="deleteModal" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="deleteTitle">
    <div class="modal" role="document">
      <header>
        <h2 id="deleteTitle">Delete job post?</h2>
        <button class="close-x" type="button" aria-label="Close" data-close>×</button>
      </header>
      <div class="body">
        <p id="deleteMsg">This action cannot be undone.</p>
      </div>
      <div class="footer">
        <button class="btn secondary" type="button" data-close>Cancel</button>
        <button id="confirmDelete" class="btn danger" type="button">Delete</button>
      </div>
    </div>
  </div>

  <script>
    // Utilities
    const $ = (s, c=document)=>c.querySelector(s);
    const $$ = (s, c=document)=>Array.from(c.querySelectorAll(s));

    const tbody = $('#jobsTable tbody');
    const emptyState = $('#emptyState');

    // Modal helpers
    const deleteModal = $('#deleteModal');
    const deleteMsg   = $('#deleteMsg');
    const confirmBtn  = $('#confirmDelete');
    let lastFocus = null;
    let pendingRow = null;

    function openModal(el){
      lastFocus = document.activeElement;
      el.classList.add('show');
      const first = el.querySelector('button,[href],input,[tabindex]:not([tabindex="-1"])');
      if (first) first.focus();
    }
    function closeModal(el){
      el.classList.remove('show');
      try{ lastFocus && lastFocus.focus(); }catch(_){}
    }
    deleteModal.addEventListener('click', (e)=>{
      if (e.target === deleteModal || e.target.hasAttribute('data-close')) {
        closeModal(deleteModal);
        pendingRow = null;
      }
    });
    window.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape' && deleteModal.classList.contains('show')){
        closeModal(deleteModal);
        pendingRow = null;
      }
    });

    // Wire up delete buttons
    tbody.addEventListener('click', (e)=>{
      const del = e.target.closest('[data-delete]');
      if (!del) return;
      e.preventDefault();
      pendingRow = del.closest('tr');
      const jobName = pendingRow?.querySelector('td')?.textContent?.trim() || 'this job';
      deleteMsg.textContent = `Delete “${jobName}”? This action cannot be undone.`;
      openModal(deleteModal);
    });

    // Confirm deletion
    confirmBtn.addEventListener('click', ()=>{
      if (!pendingRow) return;
      pendingRow.remove();
      pendingRow = null;
      closeModal(deleteModal);

      // Show empty state if no rows remain
      if (!tbody.querySelector('tr')){
        $('#jobsTable').style.display = 'none';
        emptyState.style.display = 'block';
      }
    });
  </script>
</body>
</html>