<!-- AI disclosure 
 Some Part of this code were generated by Chat GPT -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student · Saved Jobs</title>

  <!-- Shared baseline styles -->
  <link rel="stylesheet" href="../assets/css/base.css" />

  <style>
    html,body{height:100%}
    body{min-height:100vh;display:flex;flex-direction:column}

    /* Top bar matches Jobs/Documents/Applications */
    .topbar{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:16px 24px;
      border-bottom:1px solid var(--line)
    }
    .brand{font-weight:700;text-decoration:none;color:var(--ink)}
    .brand:hover{text-decoration:underline}
    .logout{color:var(--ink);text-decoration:none;border:1px solid var(--line);padding:6px 10px;border-radius:10px}
    .logout:hover{background:#fff}

    /* Full-width back strip (left-aligned to page) */
    .back-strip{
      width:100%;
      padding:16px 24px 0;
      display:flex;
      justify-content:flex-start;
    }
    .backbtn{
      display:inline-flex;align-items:center;gap:8px;
      background:#fff;color:var(--ink);
      border:1px solid var(--line);
      border-radius:10px;
      padding:.45rem .8rem;
      text-decoration:none;cursor:pointer;
    }
    .backbtn:hover{background:#f6f8fc;border-color:#c8d2e6}
    .backbtn svg{width:18px;height:18px;stroke:currentColor}

    /* Centered page title (same width as content) */
    .page-header{max-width:1100px;margin:0 auto;padding:12px 24px 24px}
    .page-header h1{margin:0;text-align:center}
    .page-header .meta{margin-top:6px;text-align:center}

    /* Same container width as Job Search */
    .wrap{max-width:1100px;margin:0 auto;padding:24px}

    /* Toolbar (search + sort + clear) */
    .toolbar{
      display:grid;
      grid-template-columns:1fr auto auto;
      gap:10px;
      align-items:end;
    }
    @media (max-width:780px){
      .toolbar{grid-template-columns:1fr 1fr;grid-auto-rows:auto}
    }
    .pillbar{display:flex;gap:8px;flex-wrap:wrap}

    /* Actions column alignment (now column 4) */
    .table thead th:nth-child(4){ text-align:center; }
    .table tbody td:nth-child(4){ text-align:center; }

    /* Make the whole Job cell feel clickable */
    td.job{ cursor:pointer; }
    td.job .job-title{ color:var(--ink); font-weight:600; }
    td.job .job-link{ color:inherit; text-decoration:none; display:block; }
    td.job:hover .job-title{ text-decoration:underline; }
  </style>
</head>
<body>
  <!-- Top bar -->
  <div class="topbar">
    <a class="brand" href="../index.html">Student2Success</a>
    <a href="../index.html" class="logout">Logout</a>
  </div>

  <!-- Back button (left side of page) -->
  <div class="back-strip">
    <button class="backbtn" type="button"
      onclick="(window.location.href='dashboard.html')">
      <svg viewBox="0 0 24 24" fill="none"><path d="M15 6l-6 6 6 6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <span>Back</span>
    </button>
  </div>

  <!-- Centered title -->
  <header class="page-header">
    <h1>Saved Jobs</h1>
    <div class="meta">Review roles you’ve bookmarked. You can apply, view details, or remove them from your list.</div>
  </header>

  <main class="wrap">
    <!-- Filters / actions -->
    <section class="card">
      <div class="toolbar">
        <div>
          <label class="label" for="search">Search saved jobs</label>
          <input id="search" class="input" placeholder="e.g., Frontend, Calgary, Remote" />
        </div>
        <div>
          <label class="label" for="sort">Sort by</label>
          <select id="sort" class="input">
            <option value="date">Recently saved</option>
            <option value="company">Company</option>
            <option value="title">Job title</option>
            <option value="location">Location</option>
          </select>
        </div>
        <div class="pillbar" style="align-self:end">
          <button id="clearAll" class="pill danger" type="button">Clear All</button>
        </div>
      </div>
    </section>

    <!-- Saved jobs table -->
    <section class="card">
      <h3>Saved List</h3>
      <table class="table">
        <thead>
          <tr>
            <th>Job</th>
            <th>Company</th>
            <th>Location</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="savedTable">
          <tr>
            <td class="job">
              <a class="job-link" href="job-details.html?id=swe-intern&from=saved">
                <div class="job-title">Software Developer Intern</div>
                <div class="meta">Build internal tools…</div>
              </a>
            </td>
            <td><span class="company">Tech Corp</span></td>
            <td>Remote</td>
            <td>
              <button class="pill danger remove">Remove</button>
            </td>
          </tr>

          <tr>
            <td class="job">
              <a class="job-link" href="job-details.html?id=web-engineer-coop&from=saved">
                <div class="job-title">Web Engineer Co-op</div>
                <div class="meta">React + Node stack.</div>
              </a>
            </td>
            <td><span class="company">SiteWorks</span></td>
            <td>Calgary, AB</td>
            <td>
              <button class="pill danger remove">Remove</button>
            </td>
          </tr>

          <tr>
            <td class="job">
              <a class="job-link" href="job-details.html?id=data-analyst-summer&from=saved">
                <div class="job-title">Data Analyst – Summer</div>
                <div class="meta">SQL · Python · Dashboards</div>
              </a>
            </td>
            <td><span class="company">Nexus Analytics</span></td>
            <td>Hybrid – Toronto</td>
            <td>
              <button class="pill danger remove">Remove</button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Empty state (hidden until list is cleared) -->
      <div id="emptyState" class="banner" style="display:none;margin-top:12px">
        You don’t have any saved jobs yet. Go to <a href="jobs.html">Job Search</a> to add some!
      </div>
    </section>
  </main>

  <footer class="footer">Student2Success</footer>

  <script>
    // Lightweight, local-only interactivity
    const table = document.getElementById('savedTable');
    const clearAll = document.getElementById('clearAll');
    const empty = document.getElementById('emptyState');
    const search = document.getElementById('search');
    const sortSel = document.getElementById('sort');

    function refreshEmptyState(){
      const visible = Array.from(table.querySelectorAll('tr')).some(tr => tr.style.display !== 'none');
      const total = table.querySelectorAll('tr').length;
      empty.style.display = total && visible ? 'none' : 'block';
    }

    // Always tag job-details links so the details page knows we came from Saved Jobs
    document.querySelectorAll('.job-link').forEach(a=>{
      if(!/[\?&]from=/.test(a.href)){
        a.href += (a.href.includes('?') ? '&' : '?') + 'from=saved';
      }
    });

    // Make the whole first cell behave like a link
    table.querySelectorAll('td.job').forEach(td=>{
      td.addEventListener('click', ()=>{
        const a = td.querySelector('.job-link');
        if(a) window.location.href = a.href;
      });
    });

    // Remove one row
    table.addEventListener('click', (e)=>{
      if(e.target.closest('.remove')){
        e.preventDefault();
        e.stopPropagation();
        e.target.closest('tr').remove();
        refreshEmptyState();
      }
    });

    // Clear all rows
    clearAll.addEventListener('click', ()=>{
      table.innerHTML = '';
      refreshEmptyState();
    });

    // Client-side filter
    search.addEventListener('input', ()=>{
      const q = search.value.toLowerCase();
      table.querySelectorAll('tr').forEach(tr=>{
        tr.style.display = tr.innerText.toLowerCase().includes(q) ? '' : 'none';
      });
      refreshEmptyState();
    });

    // Simple sort (keeps "date" order as-is)
    sortSel.addEventListener('change', ()=>{
      const by = sortSel.value;
      if (by === 'date') return;
      const idxMap = { title:0, company:1, location:2 };
      const idx = idxMap[by] ?? 0;
      const rows = Array.from(table.querySelectorAll('tr'));
      rows.sort((a,b)=>{
        const ta = a.children[idx].innerText.trim().toLowerCase();
        const tb = b.children[idx].innerText.trim().toLowerCase();
        return ta.localeCompare(tb);
      });
      rows.forEach(r=>table.appendChild(r));
    });

    refreshEmptyState();
  </script>
</body>
</html>