<!-- AI disclosure 
  Some Part of this code were generated by Chat GPT -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Student ¬∑ Job Details</title>
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/layout.css">
  <link rel="stylesheet" href="../assets/css/components.css">
  <style>
    .grid.cols-2{display:grid;grid-template-columns:2fr 1fr;gap:16px}
    @media (max-width:900px){.grid.cols-2{grid-template-columns:1fr}}

    /* Scroll container for the description */
    .desc-pane{
      max-height:60vh;
      overflow-y:auto;
      padding-right:8px;
      -webkit-overflow-scrolling:touch;
    }

    /* ---------- Modals ---------- */
    .backdrop{
      position:fixed; inset:0; display:none;
      align-items:center; justify-content:center;
      background:rgba(17,24,39,.45); z-index:300;
    }
    .backdrop.show{ display:flex; }
    .modal{
      width:min(680px, 94vw);
      background:#fff; border:1px solid var(--line); border-radius:14px;
      box-shadow:0 24px 60px rgba(2,8,23,.28);
    }
    .modal header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid var(--line)}
    .modal h2{margin:0;font-size:1.15rem}
    .modal .close-x{background:transparent;border:0;font-size:1.4rem;color:var(--muted);cursor:pointer;line-height:1}
    .modal .body{padding:16px 18px;max-height:60vh;overflow:auto}
    .modal .footer{padding:14px 18px;border-top:1px solid var(--line);display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap}

    /* Document list */
    .doc-list{display:grid;gap:10px}
    .doc-row{
      display:grid; grid-template-columns:auto 1fr auto; gap:10px; align-items:center;
      border:1px solid var(--line); border-radius:10px; padding:10px 12px; background:#fff;
    }
    .doc-row:hover{background:#f8fbff;border-color:#d9e6ff}
    .doc-meta{color:var(--muted);font-size:.9rem}
    .pill-info{padding:.2rem .55rem;border-radius:999px;border:1px solid #d7deea;background:#fff;color:#334155;font-size:.8rem}

    /* Confirmation & Save modals */
    .success-wrap{display:grid;justify-items:center;gap:10px;text-align:center}
    .checkmark{
      width:56px;height:56px;border-radius:999px;background:rgba(34,197,94,.12);
      display:grid;place-items:center;color:#16a34a;border:1px solid #bfe6cf;
      font-size:28px;line-height:1;
    }
    .bookmark{
      width:56px;height:56px;border-radius:999px;background:rgba(59,107,231,.12);
      display:grid;place-items:center;color:#3b82f6;border:1px solid #bcd0ff;
      font-size:24px;line-height:1;
    }
    .attached-list{margin:10px 0 0;padding:0;list-style:none;color:var(--muted)}
  </style>
</head>
<body>
  <header class="header">
    <div class="crumbs">
      <a id="backLink" href="jobs.html">‚Üê Job Search</a>
      <span class="meta">/ Details</span>
    </div>
    <h1 id="jobTitle">Software Developer Intern</h1>
    <p id="jobMeta" class="meta">Tech Corp ¬∑ Remote ¬∑ Internship ¬∑ $25/hr ¬∑ <strong>Deadline:</strong> Jan 1, 2026</p>
  </header>

  <main class="container grid cols-2">
    <section class="card">
      <div id="descPane" class="desc-pane" tabindex="0" aria-label="Job description content">
        <!-- Filled by JS -->
      </div>
    </section>

    <aside class="card">
      <p><button id="applyBtn" class="btn block">Apply Now</button></p>
      <p><button id="saveBtn" class="btn secondary block">Save Job</button></p>
    </aside>
  </main>

  <footer class="footer">Student2Success</footer>

  <!-- ========== Apply Modal ========== -->
  <div id="applyModal" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="applyTitle">
    <div class="modal" role="document">
      <header>
        <h2 id="applyTitle">Submit Application</h2>
        <button class="close-x" type="button" aria-label="Close" data-close>√ó</button>
      </header>
      <div class="body">
        <p class="meta" style="margin-top:0">Choose files to attach from your document storage.</p>

        <!-- Quick actions -->
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px">
          <button id="selectAll" class="pill" type="button">Select all</button>
          <button id="clearAll" class="pill" type="button">Clear all</button>
          <a class="pill" href="documents.html">Open Documents</a>
        </div>

        <!-- Document storage (sample, hard-coded for prototype) -->
        <div id="docList" class="doc-list">
          <label class="doc-row">
            <input class="doc" type="checkbox" value="Resume ‚Äì Maharsh Patel.pdf" checked>
            <div>
              <div><strong>Resume ‚Äì Maharsh Patel.pdf</strong></div>
              <div class="doc-meta">PDF ¬∑ updated 3d ago ¬∑ 1.1 MB</div>
            </div>
            <span class="pill-info">Required</span>
          </label>

        <label class="doc-row">
            <input class="doc" type="checkbox" value="Cover Letter (role-specific).docx">
            <div>
              <div><strong>Cover Letter (role-specific).docx</strong></div>
              <div class="doc-meta">DOCX ¬∑ updated today ¬∑ 120 KB</div>
            </div>
            <span class="pill-info">Optional</span>
          </label>

          <label class="doc-row">
            <input class="doc" type="checkbox" value="Unofficial Transcript.pdf">
            <div>
              <div><strong>Unofficial Transcript.pdf</strong></div>
              <div class="doc-meta">PDF ¬∑ updated 2w ago ¬∑ 450 KB</div>
            </div>
            <span class="pill-info">Optional</span>
          </label>

          <label class="doc-row">
            <input class="doc" type="checkbox" value="Portfolio Links.txt">
            <div>
              <div><strong>Portfolio Links.txt</strong></div>
              <div class="doc-meta">TXT ¬∑ updated 5d ago ¬∑ 2 KB</div>
            </div>
            <span class="pill-info">Optional</span>
          </label>
        </div>
      </div>
      <div class="footer">
        <button class="btn secondary" type="button" data-close>Cancel</button>
        <button id="submitApp" class="btn" type="button">Attach &amp; Submit</button>
      </div>
    </div>
  </div>

  <!-- ========== Application Confirmation Modal ========== -->
  <div id="confirmModal" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <div class="modal" role="document">
      <header>
        <h2 id="confirmTitle">Application Submitted</h2>
        <button class="close-x" type="button" aria-label="Close" data-close>√ó</button>
      </header>
      <div class="body">
        <div class="success-wrap">
          <div class="checkmark">‚úì</div>
          <p><strong id="confirmText">Your application was sent.</strong></p>
          <div class="meta">Attachments:</div>
          <ul id="attachedList" class="attached-list"></ul>
        </div>
      </div>
      <div class="footer">
        <a class="btn secondary" href="applications.html">View Applications</a>
        <button class="btn" type="button" data-close>Done</button>
      </div>
    </div>
  </div>

  <!-- ========== Save Job Confirmation Modal (NEW) ========== -->
  <div id="savedModal" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="savedTitle">
    <div class="modal" role="document">
      <header>
        <h2 id="savedTitle">Job Saved</h2>
        <button class="close-x" type="button" aria-label="Close" data-close>√ó</button>
      </header>
      <div class="body">
        <div class="success-wrap">
          <div class="bookmark">üîñ</div>
          <p><strong id="savedText">This job was added to your saved list.</strong></p>
          <p class="meta">You can return to it anytime from <em>Saved Jobs</em>.</p>
        </div>
      </div>
      <div class="footer">
        <a class="btn secondary" href="saved-jobs.html">View Saved Jobs</a>
        <button class="btn" type="button" data-close>Done</button>
      </div>
    </div>
  </div>

  <script>
    // ---------------- Job dataset (unique content per job) ----------------
    const JOBS = {
      "swe-intern": {
        title: "Software Developer Intern",
        company: "Tech Corp",
        location: "Remote",
        type: "Internship",
        pay: "$25/hr",
        deadline: "Jan 1, 2026",
        html: `
          <h3>Description</h3>
          <p>Join our Developer Experience group to improve how engineers ship code every day. In this role you‚Äôll help design and build internal tools that streamline workflows, reduce toil, and give teams visibility into releases and quality. You‚Äôll collaborate with mentors, product managers, and designers to deliver features incrementally and safely.</p>
          <p>Your projects may include enhancing a React component library, adding new API endpoints, instrumenting services for metrics and traces, and building small CLI utilities that automate repetitive tasks. We value thoughtful engineering, clear documentation, and practical testing.</p>

          <h3 class="mt-16">Responsibilities</h3>
          <ul>
            <li>Implement front-end features with React/TypeScript and accessible UI patterns.</li>
            <li>Build and document JSON/REST endpoints in a simple service architecture.</li>
            <li>Write automated tests (unit/integration) and keep CI green.</li>
            <li>Add observability to new code paths (logs, metrics, traces, alerts).</li>
            <li>Participate in code reviews; give and receive actionable feedback.</li>
            <li>Collaborate with design on component behavior, states, and edge cases.</li>
            <li>Contribute to docs, ADRs, and runbooks for easy handoffs.</li>
            <li>Demo features regularly; iterate quickly based on feedback.</li>
          </ul>

          <h3 class="mt-16">Basic qualifications</h3>
          <ul>
            <li>Foundational web skills: HTML, CSS, JavaScript.</li>
            <li>Experience with React (or similar) from coursework or projects.</li>
            <li>Comfort with Git, branches, and pull requests.</li>
            <li>Understanding of HTTP, REST, and JSON.</li>
            <li>Strong communication and eagerness to learn.</li>
          </ul>

          <h3 class="mt-16">Preferred qualifications</h3>
          <ul>
            <li>TypeScript and React Hooks familiarity.</li>
            <li>Some backend experience (Node/Python/Go/Java) and basic SQL.</li>
            <li>Exposure to Docker and local containerized dev.</li>
            <li>Awareness of accessibility standards and testing tools.</li>
            <li>Interest in developer tooling and platform reliability.</li>
          </ul>

          <h3 class="mt-16">Intern experience</h3>
          <ul>
            <li>Dedicated mentor, weekly learning sessions, and project milestones.</li>
            <li>Opportunities to present your work to engineering and product stakeholders.</li>
            <li>Potential return-offer pathway based on performance and business needs.</li>
          </ul>
        `
      },

      "web-engineer-coop": {
        title: "Web Engineer Co-op",
        company: "SiteWorks",
        location: "Remote",
        type: "Co-op",
        pay: "$27/hr",
        deadline: "Feb 15, 2026",
        html: `
          <h3>Overview</h3>
          <p>As a Web Engineer Co-op you‚Äôll help ship polished, accessible UI for customer-facing features. You‚Äôll work with designers and product managers to iterate quickly, and with senior engineers to learn best practices in modern frontend engineering.</p>

          <h3 class="mt-16">What you‚Äôll do</h3>
          <ul>
            <li>Build responsive components with <strong>React or Vue</strong> + TypeScript.</li>
            <li>Add E2E tests with <strong>Playwright/Cypress</strong> and unit tests with Vitest/Jest.</li>
            <li>Contribute to our design system; ensure AA/AAA accessibility.</li>
            <li>Integrate with REST/GraphQL APIs; handle caching and optimistic updates.</li>
            <li>Improve performance (bundle size, code-splitting, lazy loading).</li>
            <li>Debug and triage production issues with logs and browser traces.</li>
          </ul>

          <h3 class="mt-16">You have</h3>
          <ul>
            <li>Coursework or projects using modern JS frameworks.</li>
            <li>Comfort with GitHub flow and code reviews.</li>
            <li>Basic understanding of web performance and accessibility.</li>
          </ul>

          <h3 class="mt-16">Nice to have</h3>
          <ul>
            <li>Experience with Vite/webpack build tooling.</li>
            <li>Styling with TailwindCSS or CSS-in-JS.</li>
            <li>API data fetching with TanStack Query/SWR.</li>
          </ul>
        `
      },

      "backend-fulltime": {
        title: "Backend Developer",
        company: "Nexus Analytics",
        location: "Toronto",
        type: "Full-time",
        pay: "$42/hr",
        posted: "Posted 3d",
        html: `
          <h3>Role</h3>
          <p>We‚Äôre building data products that power analytics for enterprise customers. As a Backend Developer you‚Äôll design and build reliable services that ingest, transform, and expose data at scale.</p>

          <h3 class="mt-16">Responsibilities</h3>
          <ul>
            <li>Design REST/GraphQL APIs and microservices in <strong>Node/Python/Go</strong>.</li>
            <li>Model data in <strong>PostgreSQL</strong>; use Redis for caching and rate-limiting.</li>
            <li>Build async pipelines with queues/streams (e.g., Kafka, SQS).</li>
            <li>Write tests; ship with CI/CD; monitor with metrics and tracing.</li>
            <li>Containerize services with Docker; deploy to Kubernetes.</li>
          </ul>

          <h3 class="mt-16">Qualifications</h3>
          <ul>
            <li>2+ years professional backend experience (or strong equivalent projects).</li>
            <li>Solid understanding of HTTP, database transactions, and API design.</li>
            <li>Comfort debugging performance and memory issues.</li>
          </ul>

          <h3 class="mt-16">Bonus</h3>
          <ul>
            <li>Experience with Airflow/DBT or other ETL frameworks.</li>
            <li>Security best practices: authN/Z, secrets, input validation.</li>
          </ul>

          <h3 class="mt-16">Benefits</h3>
          <ul>
            <li>Flexible schedule, hybrid work, learning budget, and comprehensive health plan.</li>
          </ul>
        `
      },

      "support-parttime": {
        title: "IT Support Specialist",
        company: "CloudCore",
        location: "Vancouver",
        type: "Part-time",
        pay: "$23/hr",
        posted: "Posted 4d",
        html: `
          <h3>Summary</h3>
          <p>Join our internal IT team to keep employees productive. You‚Äôll respond to tickets, prep devices, and onboard new hires. This is a part-time role ideal for students with strong customer focus.</p>

          <h3 class="mt-16">Key duties</h3>
          <ul>
            <li>Triage support tickets; escalate when needed.</li>
            <li>Image and provision laptops (macOS &amp; Windows).</li>
            <li>Set up accounts, SSO, MFA, and group memberships.</li>
            <li>Manage devices via MDM (<strong>Intune/Jamf</strong>); track hardware inventory.</li>
            <li>Basic network troubleshooting (Wi-Fi, VPN, printers).</li>
            <li>Prepare onboarding kits and run first-day checklists.</li>
          </ul>

          <h3 class="mt-16">What you bring</h3>
          <ul>
            <li>Great communication and a helpful, patient attitude.</li>
            <li>Familiarity with ticketing systems (Jira Service Mgmt, Zendesk, etc.).</li>
            <li>Comfort following SOPs and documenting fixes.</li>
          </ul>

          <h3 class="mt-16">Schedule</h3>
          <p>15‚Äì20 hours/week with at least two on-site shifts preferred.</p>
        `
      },

      "data-analyst-intern": {
        title: "Data Analyst Intern",
        company: "DataViz Inc",
        location: "Calgary",
        type: "Internship",
        pay: "$20/hr",
        posted: "Posted 1w",
        html: `
          <h3>About the role</h3>
          <p>Work with our analytics team to build dashboards and automate reporting. You‚Äôll clean datasets, write queries, and create visualizations that help stakeholders make decisions.</p>

          <h3 class="mt-16">Responsibilities</h3>
          <ul>
            <li>Explore and clean data with Python/SQL.</li>
            <li>Build dashboards in Tableau/Power BI/Looker.</li>
            <li>Automate recurring reports and QA data sources.</li>
            <li>Document definitions and metrics in our data catalog.</li>
          </ul>

          <h3 class="mt-16">Qualifications</h3>
          <ul>
            <li>SQL proficiency; comfort with pandas or similar.</li>
            <li>Understanding of joins, aggregates, and basic statistics.</li>
            <li>Clear presentation and communication skills.</li>
          </ul>
        `
      }
    };

    // ---------------- Render the selected job ----------------
    const params = new URLSearchParams(location.search);
    const jobId = params.get('id') || 'swe-intern';
    const job = JOBS[jobId] || JOBS['swe-intern'];

    // Header
    const titleEl = document.getElementById('jobTitle');
    const metaEl  = document.getElementById('jobMeta');
    const descEl  = document.getElementById('descPane');

    titleEl.textContent = job.title;

    const deadlineOrPosted = job.deadline
      ? ` ¬∑ <strong>Deadline:</strong> ${job.deadline}`
      : (job.posted ? ` ¬∑ ${job.posted}` : '');

    metaEl.innerHTML = `${job.company} ¬∑ ${job.location} ¬∑ ${job.type} ¬∑ ${job.pay}${deadlineOrPosted}`;

    // Body content
    descEl.innerHTML = job.html;

    // Put job title into confirmation texts
    const confirmText = document.getElementById('confirmText');
    confirmText.textContent = `Your application to ‚Äú${job.title}‚Äù was sent.`;
    const savedText = document.getElementById('savedText');
    savedText.textContent = `‚Äú${job.title}‚Äù was added to your saved list.`;

    // ---------------- Back link + Save button visibility ----------------
    (function(){
      const from = params.get('from');
      const ref = document.referrer || '';
      const back = document.getElementById('backLink');
      const saveBtn = document.getElementById('saveBtn');

      if (from === 'saved' || /saved\.html/i.test(ref) || /\/saved(?:-jobs)?\.html/i.test(ref)) {
        back.href = 'saved-jobs.html';
        back.textContent = '‚Üê Saved Jobs';
        if (saveBtn) {
          saveBtn.hidden = true;
          saveBtn.setAttribute('aria-hidden', 'true');
          saveBtn.style.display = 'none';
        }
        return;
      }
      if (from === 'applications' || ref.includes('applications.html')) {
        back.href = 'applications.html';
        back.textContent = '‚Üê Applications';
        return;
      }
      back.href = 'jobs.html';
      back.textContent = '‚Üê Job Search';
    })();

    // ---------------- Apply flow (attach docs -> confirmation) ----------------
    const applyBtn     = document.getElementById('applyBtn');
    const applyModal   = document.getElementById('applyModal');
    const confirmModal = document.getElementById('confirmModal');
    const savedModal   = document.getElementById('savedModal');
    const attachedList = document.getElementById('attachedList');
    const submitApp    = document.getElementById('submitApp');
    const selectAllBtn = document.getElementById('selectAll');
    const clearAllBtn  = document.getElementById('clearAll');
    const saveBtnEl    = document.getElementById('saveBtn');

    let lastFocus = null;

    function openModal(el){
      lastFocus = document.activeElement;
      el.classList.add('show');
      const first = el.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if (first) first.focus();
    }
    function closeModal(el){
      el.classList.remove('show');
      if (lastFocus) { try { lastFocus.focus(); } catch(e){} }
    }
    function backdropOrCloseX(e){
      if (e.target.hasAttribute('data-close') || e.target === e.currentTarget) {
        closeModal(e.currentTarget);
      }
    }

    // Open Apply
    applyBtn.addEventListener('click', ()=> openModal(applyModal));

    // Save Job -> simple confirmation pop-up (no persistence)
    if (saveBtnEl){
      saveBtnEl.addEventListener('click', ()=> openModal(savedModal));
    }

    // Close handlers (X, Cancel, backdrop)
    applyModal.addEventListener('click', backdropOrCloseX);
    confirmModal.addEventListener('click', backdropOrCloseX);
    savedModal.addEventListener('click', backdropOrCloseX);
    window.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape'){
        if (savedModal.classList.contains('show'))      closeModal(savedModal);
        else if (confirmModal.classList.contains('show')) closeModal(confirmModal);
        else if (applyModal.classList.contains('show'))   closeModal(applyModal);
      }
    });

    // Select/Clear all
    selectAllBtn.addEventListener('click', ()=>{
      applyModal.querySelectorAll('input.doc').forEach(cb => cb.checked = true);
    });
    clearAllBtn.addEventListener('click', ()=>{
      applyModal.querySelectorAll('input.doc').forEach(cb => cb.checked = false);
    });

    // Submit application (prototype)
    submitApp.addEventListener('click', ()=>{
      const selected = Array.from(applyModal.querySelectorAll('input.doc:checked')).map(cb=>cb.value);
      attachedList.innerHTML = '';
      if (selected.length){
        selected.forEach(name=>{
          const li = document.createElement('li');
          li.textContent = name;
          attachedList.appendChild(li);
        });
      }else{
        const li = document.createElement('li');
        li.textContent = 'No attachments';
        attachedList.appendChild(li);
      }
      closeModal(applyModal);
      openModal(confirmModal);
    });
  </script>
</body>
</html>