<!-- AI disclosure 
  Some Part of this code were generated by Chat GPT -->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Staff · Loading…</title>
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/layout.css">
  <link rel="stylesheet" href="../assets/css/components.css">
  <style>
    html,body{height:100%} body{min-height:100vh;display:flex;flex-direction:column} main{flex:1}
    .topbar{width:100%;display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid var(--line)}
    .brand{font-weight:700;text-decoration:none;color:var(--ink)} .brand:hover{text-decoration:underline}
    .logout{color:var(--ink);text-decoration:none;border:1px solid var(--line);padding:6px 10px;border-radius:10px} .logout:hover{background:#fff}
    .back-strip{width:100%;padding:16px 24px 0;display:flex;justify-content:flex-start}
    .backbtn{display:inline-flex;align-items:center;gap:8px;background:#fff;color:var(--ink);border:1px solid var(--line);border-radius:10px;padding:.45rem .8rem;cursor:pointer}
    .backbtn:hover{background:#f6f8fc;border-color:#c8d2e6} .backbtn svg{width:18px;height:18px;stroke:currentColor}
    .page-header{max-width:1100px;margin:0 auto;padding:12px 24px 24px} .page-header h1{margin:0;text-align:center} .meta.center{text-align:center;color:var(--muted)}
    .grid.cols-2{display:grid;grid-template-columns:2fr 1fr;gap:16px} @media (max-width:900px){.grid.cols-2{grid-template-columns:1fr}}
    .details-scroll{max-height:60vh;overflow:auto;padding-right:8px;-webkit-overflow-scrolling:touch}
    .details-scroll::-webkit-scrollbar{width:8px} .details-scroll::-webkit-scrollbar-thumb{background:#cfd8e6;border-radius:8px}
    .details-scroll:hover::-webkit-scrollbar-thumb{background:#b9c5db} .details-scroll{scrollbar-width:thin;scrollbar-color:#cfd8e6 transparent}
    .actions-card .btn{width:100%}
    .btn-approve{background:#16a34a;color:#fff;border:0} .btn-approve:hover{filter:brightness(.95)} .btn-approve:focus{outline:2px solid rgba(22,163,74,.35);outline-offset:2px}
    .btn-decline{background:#ef4444;color:#fff;border:0} .btn-decline:hover{filter:brightness(.95)} .btn-decline:focus{outline:2px solid rgba(239,68,68,.35);outline-offset:2px}
    .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(17,24,39,.45);z-index:300}
    .modal-backdrop.show{display:flex}
    .modal{width:min(560px,94vw);background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:0 24px 60px rgba(2,8,23,.28);padding:0 0 14px}
    .modal header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line)}
    .modal .body{padding:16px} .modal .footer{padding:0 16px;display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap}
    .modal .close-x{background:transparent;border:0;font-size:1.4rem;color:var(--muted);cursor:pointer;line-height:1}
    .modal .meta{color:var(--muted)} .modal textarea{width:100%;min-height:110px}
    .checkmark,.xmark{display:inline-block;width:26px;height:26px;border-radius:999px;color:#fff;line-height:26px;text-align:center;font-weight:700;margin-right:8px}
    .checkmark{background:#16a34a} .xmark{background:#ef4444}
  </style>
</head>
<body>
  <div class="topbar">
    <a class="brand" href="../index.html">Student2Success</a>
    <a href="../index.html" class="logout">Logout</a>
  </div>

  <div class="back-strip">
    <button id="backBtn" class="backbtn" type="button">
      <svg viewBox="0 0 24 24" fill="none"><path d="M15 6l-6 6 6 6" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <span id="backLabel">Queue</span>
    </button>
  </div>

  <header class="page-header">
    <h1 id="jobTitle">Loading…</h1>
    <div id="jobMeta" class="meta center" aria-live="polite">—</div>
  </header>

  <main class="container grid cols-2">
    <section class="card">
      <div id="descWrap" class="details-scroll" role="region" aria-label="Job description and requirements" tabindex="0"></div>
    </section>

    <aside class="card actions-card" aria-label="Review actions">
      <p><button id="approveBtn" class="btn btn-approve" aria-label="Approve job">Approve</button></p>
      <p><button id="declineBtn" class="btn btn-decline" aria-label="Decline job">Decline</button></p>
    </aside>
  </main>

  <footer class="footer">Student2Success</footer>

  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div id="approveModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="approveTitle" aria-describedby="approveDesc" style="display:none">
      <header>
        <h2 id="approveTitle"><span class="checkmark">✓</span>Job approved</h2>
        <button class="close-x" type="button" data-close>×</button>
      </header>
      <div class="body"><p id="approveDesc" class="meta">The posting has been approved and is now visible to students.</p></div>
      <div class="footer"><button class="btn" type="button" data-close>Done</button></div>
    </div>

    <div id="declineModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="declineTitle" aria-describedby="declineDesc" style="display:none">
      <header>
        <h2 id="declineTitle"><span class="xmark">✕</span>Job declined</h2>
        <button class="close-x" type="button" data-close>×</button>
      </header>
      <div class="body">
        <p id="declineDesc" class="meta">The posting was declined. You can include optional feedback for the employer below.</p>
        <label class="label" for="declineFeedback">Feedback (optional)</label>
        <textarea id="declineFeedback" class="input" placeholder="Brief reason or requested changes…"></textarea>
      </div>
      <div class="footer">
        <button class="btn ghost" type="button" data-close>Close</button>
        <button id="sendFeedbackBtn" class="btn" type="button">Send feedback</button>
      </div>
    </div>
  </div>

  <script>
    /* Unique descriptions per job */
    const JOBS = {
      "swe-intern": {
        title: "Software Developer Intern",
        company: "Tech Corp",
        location: "Remote",
        pay: "$25/hr",
        submitted: "2025-10-20",
        html: `
          <h3>Description</h3>
          <p>Help the Platform Enablement team improve internal developer tooling. You'll build small services and UI utilities that reduce build times, standardize logs, and automate release checks. Expect hands-on mentorship and frequent demos with partner teams.</p>
          <h3 class="mt-16">Key Outcomes</h3>
          <ul>
            <li>CLI tool to lint and validate service configs before deploy</li>
            <li>Dashboard panel surfacing flaky tests and slowest suites</li>
            <li>Telemetry hooks for API latency SLO tracking</li>
          </ul>
          <h3 class="mt-16">Requirements</h3>
          <ul>
            <li>Foundations in JS/TS and at least one backend language</li>
            <li>Comfort with Git, PR reviews, and basic unit testing</li>
            <li>Curiosity about CI/CD, observability, and developer experience</li>
          </ul>
        `
      },
      "ux-research-asst": {
        title: "UX Research Assistant",
        company: "DesignCo",
        location: "Calgary (Hybrid)",
        pay: "$24/hr",
        submitted: "2025-10-21",
        html: `
          <h3>Overview</h3>
          <p>Support lead researchers with planning and conducting studies for our onboarding and billing flows. You'll help with protocol design, recruiting, note-taking, and synthesis into actionable insights for designers and PMs.</p>
          <h3 class="mt-16">Responsibilities</h3>
          <ul>
            <li>Draft screeners and interview guides; coordinate sessions</li>
            <li>Run unmoderated tests; tag and summarize findings</li>
            <li>Create highlight reels and insight briefs for design reviews</li>
          </ul>
          <h3 class="mt-16">Requirements</h3>
          <ul>
            <li>Strong writing and attention to detail</li>
            <li>Basic prototyping familiarity (Figma preferred)</li>
            <li>Understanding of research ethics and consent</li>
          </ul>
        `
      }
    };

    /* Resolve selection & render */
    const params  = new URLSearchParams(location.search);
    const jobId   = params.get('id') || 'swe-intern';
    const job     = JOBS[jobId] || JOBS['swe-intern'];

    document.title = `Staff · Job Details – ${job.title}`;
    document.getElementById('jobTitle').textContent = job.title;
    document.getElementById('jobMeta').innerHTML =
      `${job.company} · ${job.location} · ${job.pay} · <strong>Submitted:</strong> ${job.submitted}`;
    document.getElementById('descWrap').innerHTML = job.html;

    /* Back button: prefer ?from=queue */
    const backBtn   = document.getElementById('backBtn');
    const backLabel = document.getElementById('backLabel');
    const fromParam = params.get('from');
    const ref       = document.referrer || '';
    function resolveBack(){
      if (fromParam === 'queue' || /\/jobs\.html(\?|$)/i.test(ref)) return { href: 'jobs.html', label: 'Queue' };
      if (fromParam === 'dashboard' || /\/dashboard\.html(\?|$)/i.test(ref)) return { href: 'dashboard.html', label: 'Dashboard' };
      return { href: 'jobs.html', label: 'Queue' };
    }
    const back = resolveBack();
    backLabel.textContent = back.label;
    backBtn.onclick = () => { window.location.href = back.href; };

    /* Modal plumbing */
    const backdrop=document.getElementById('modalBackdrop');
    const approveModal=document.getElementById('approveModal');
    const declineModal=document.getElementById('declineModal');
    const approveBtn=document.getElementById('approveBtn');
    const declineBtn=document.getElementById('declineBtn');
    const sendFeedbackBtn=document.getElementById('sendFeedbackBtn');
    const feedbackInput=document.getElementById('declineFeedback');
    let lastFocus=null;

    function openModal(which){
      lastFocus=document.activeElement;
      backdrop.classList.add('show');backdrop.setAttribute('aria-hidden','false');
      if(which==='approve'){approveModal.style.display='block';approveModal.querySelector('.close-x').focus();}
      else{declineModal.style.display='block';declineModal.querySelector('.close-x').focus();}
      document.body.style.overflow='hidden';
    }
    function closeModal(){
      approveModal.style.display='none';declineModal.style.display='none';
      backdrop.classList.remove('show');backdrop.setAttribute('aria-hidden','true');
      document.body.style.overflow=''; try{lastFocus&&lastFocus.focus();}catch(_){}
    }
    approveBtn.addEventListener('click',()=>openModal('approve'));
    declineBtn.addEventListener('click',()=>openModal('decline'));
    backdrop.addEventListener('click',(e)=>{ if(e.target===backdrop || e.target.closest('[data-close]')) closeModal(); });
    window.addEventListener('keydown',(e)=>{ if(e.key==='Escape'&&backdrop.classList.contains('show')) closeModal(); });
    sendFeedbackBtn.addEventListener('click',()=>{
      sendFeedbackBtn.disabled=true;sendFeedbackBtn.textContent='Sending…';
      setTimeout(()=>{sendFeedbackBtn.textContent='Sent ✓';setTimeout(closeModal,700);},600);
    });
  </script>
</body>
</html>